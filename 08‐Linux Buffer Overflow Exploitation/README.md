# 8. ‚Äê Linux Buffer Overflow Exploitation

The concetps behind exploiting buffer overflows in Linux are similar to those on the Windows platform. This section explores the process of exploiting a Linux application, the online multiplayer RPG game, Crossfire.

Crossfire 1.9.0 suffered from a buffer overflow while accepting input from a socket connection. You'll use the Evans Linux debugger (EDB) to debug this program, as it will provuide you with a familiar debugging environment, which should ease you into exploiting buffer overflows in Linux environments.

## 8.1 - Setting Up the Environment

We will use our Kali Linux **i486** machine, to both run the vulnerable software, and debug the application.

However, before you run this vulnerable software on our machine, you should implement an **iptables** rule that will only allow traffixc from the loopback interface, so that your machine is **not** vulnerable to external attacks. For this same reason, we will be using the loopback interface (127.0.0.1) as our target IP and TCP port 4444 as our bind shell port.

This rule will deny any traffic to the vulnerable port, and prevent others from exploiting your Kali Linux machine during this exercise.

```
iptables -A INPUT -p tcp --destination-port 13327 \! -d 127.0.0.1 -j DROP
iptables -A INPUT -p tcp --destination-port 4444 \! -d 127.0.0.1 -j DROP
```

Now that we've secured our machine, we can proceed to download and install the vulnerable version of **crossfire** in Kali Linux:

##### Crossfire 1.9.0 downlaod [link](https://www.offensive-security.com/crossfire.tar.gz)

```
root@kali:~# cd /usr/games/
root@kali:~# wget https://www.offensive-security.com/crossfire.tar.gz
root@kali:~# tar zxpf crossfire.tar.gz
```

In more recnt Linux kernels and compilers, various memory protection tachniques have been implemented, such as memory randomization, stack coockies, etc. Bypassing these protection mechanims is beyond the scope of this modeule. The version of crossfire we are testing was compiled without the stack smashing protection support, as well as without ASRL and DEP support.

## 8.2 - Crashing Crossfire

We can start the vulnerable Crossfire application using the Evans debugger, using the following command:

```
root@kali:~# edb --run /usr/games/crossfire/bin/crossfire
```

The debbuger pauses the application at start